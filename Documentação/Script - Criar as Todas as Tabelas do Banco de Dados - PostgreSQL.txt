CREATE TABLE PESSOAS (
	ID_PESSOA SERIAL PRIMARY KEY NOT NULL,
	NOME VARCHAR(100) NOT NULL,
	TELEFONE VARCHAR(14) NOT NULL,
	EMAIL VARCHAR(50),
	ESTADO_BRASILEIRO VARCHAR(25),
	TIPO_PESSOA VARCHAR(15) NOT NULL,
	CPF_CNPJ VARCHAR(18) NOT NULL
);

CREATE TABLE CLIENTES (
	ID_CLIENTE SERIAL PRIMARY KEY NOT NULL,
	ALERGIAS VARCHAR(500),
	ID_PESSOA_FK INTEGER NOT NULL,
	CONSTRAINT PESSOA_DO_CLINTE FOREIGN KEY (ID_PESSOA_FK) REFERENCES PESSOAS(ID_PESSOA)
);

CREATE TABLE FORNECEDORES (
	ID_FORNECEDOR SERIAL PRIMARY KEY NOT NULL,
	ENDERECO VARCHAR(100),
	ID_PESSOA_FK INTEGER NOT NULL,
	CONSTRAINT PESSOA_DO_FORNECEDOR FOREIGN KEY (ID_PESSOA_FK) REFERENCES PESSOAS(ID_PESSOA)
);

CREATE TABLE FUNCIONARIOS (
	ID_FUNCIONARIO SERIAL PRIMARY KEY NOT NULL,
	LOGIN VARCHAR(30) UNIQUE NOT NULL,
	SENHA VARCHAR(30) NOT NULL,
	COMISSAO NUMERIC(5, 2) NOT NULL,
	ID_PESSOA_FK INTEGER NOT NULL,
	CONSTRAINT PESSOA_DO_FUNCIONARIO FOREIGN KEY (ID_PESSOA_FK) REFERENCES PESSOAS(ID_PESSOA)
);

CREATE TABLE SERVICOS (
	ID_SERVICO SERIAL PRIMARY KEY NOT NULL,
	NOME VARCHAR(100) NOT NULL,
	DESCRICAO VARCHAR(500),
	PRECO_CUSTO NUMERIC(9, 2) NOT NULL,
	PRECO_VENDA NUMERIC(9, 2) NOT NULL
);

CREATE TABLE AGENDAMENTOS (
	ID_AGENDAMENTO SERIAL PRIMARY KEY NOT NULL,
	DATA DATE NOT NULL,
	HORA TIME NOT NULL,
	STATUS VARCHAR(15) NOT NULL,
	OBSERVACAO VARCHAR(500),
	ID_CLIENTE_FK INTEGER NOT NULL,
	ID_RESPONSAVEL_AGENDAMENTO_FK INTEGER NOT NULL,
	ID_SERVICO_FK INTEGER NOT NULL,
	CONSTRAINT CLIENTE_DO_AGENDAMENTO FOREIGN KEY (ID_CLIENTE_FK) REFERENCES CLIENTES(ID_CLIENTE),
	CONSTRAINT FUNCIONARIO_DO_AGENDAMENTO FOREIGN KEY (ID_RESPONSAVEL_AGENDAMENTO_FK) REFERENCES FUNCIONARIOS(ID_FUNCIONARIO),
	CONSTRAINT SERVICO_DO_AGENDAMENTO FOREIGN KEY (ID_SERVICO_FK) REFERENCES SERVICOS(ID_SERVICO)
);

CREATE TABLE ORDENS_SERVICOS (
	ID_ORDEM_SERVICO SERIAL PRIMARY KEY,
	DATA_HORA_INICIO TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	DATA_HORA_TERMINO TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	STATUS VARCHAR(15) NOT NULL, 
	VALOR NUMERIC(9, 2) NOT NULL, 
	ID_AGENDAMENTO_FK INTEGER NOT NULL,
	ID_SERVICO_FK INTEGER NOT NULL,
	ID_FUNCIONARIO_RESPONSAVEL_OS_FK INTEGER NOT NULL,
	ID_FUNCIONARIO_EXECUTAR_SERVICO_FK INTEGER NOT NULL,
	CONSTRAINT AGENDAMENTO_DA_ORDEM_SERVICO FOREIGN KEY (ID_AGENDAMENTO_FK) REFERENCES AGENDAMENTOS(ID_AGENDAMENTO),
	CONSTRAINT SERVICO_DA_ORDEM_SERVICO FOREIGN KEY (ID_SERVICO_FK) REFERENCES SERVICOS(ID_SERVICO),
	CONSTRAINT FUNCIONARIO_RESPONSAVEL_OS_DA_ORDEM_SERVICO FOREIGN KEY (ID_FUNCIONARIO_RESPONSAVEL_OS_FK) REFERENCES FUNCIONARIOS(ID_FUNCIONARIO),
	CONSTRAINT FUNCIONARIO_EXECUTAR_SERVICO_DA_ORDEM_SERVICO FOREIGN KEY (ID_FUNCIONARIO_EXECUTAR_SERVICO_FK) REFERENCES FUNCIONARIOS(ID_FUNCIONARIO)
);

CREATE TABLE CONTAS_PAGAR (
	ID_CONTA_PAGAR SERIAL NOT NULL,
	DATA_EMISSAO TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	DATA_VENCIMENTO TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	VALOR NUMERIC(9, 2) NOT NULL,
	VALOR_PAGO NUMERIC(9, 2) NOT NULL,
	DATA_PAGAMENTO TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	STATUS VARCHAR(15) NOT NULL,
	ID_FORNECEDOR_FK INTEGER NOT NULL,
	CONSTRAINT FORNECEDOR_DA_CONTA_RECEBER FOREIGN KEY (ID_FORNECEDOR_FK) REFERENCES FORNECEDORES(ID_FORNECEDOR)
);

CREATE TABLE CONTAS_RECEBER (
	ID_CONTA_RECEBER SERIAL NOT NULL,
	DATA_EMISSAO TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	DATA_VENCIMENTO TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	VALOR NUMERIC(9, 2) NOT NULL,
	VALOR_RECEBIDO NUMERIC(9, 2) NOT NULL,
	DATA_RECEBIMENTO TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	STATUS VARCHAR(15) NOT NULL,
	ID_ORDEM_SERVICO_FK INTEGER NOT NULL,
	ID_CLIENTE_FK INTEGER NOT NULL,
	CONSTRAINT ORDEM_SERVICO_DA_CONTA_RECEBER FOREIGN KEY (ID_ORDEM_SERVICO_FK) REFERENCES ORDENS_SERVICOS(ID_ORDEM_SERVICO),
	CONSTRAINT CLIENTE_DA_CONTA_RECEBER FOREIGN KEY (ID_CLIENTE_FK) REFERENCES CLIENTES(ID_CLIENTE)
);
